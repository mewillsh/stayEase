# 📅 StayNest Dev Log - 10 June 2025

## ✅ Goal
Seed MongoDB with sample listings using Mongoose.

---

## 🛠 Issue Faced
**Error:**
ValidationError: Cast to string failed for value { filename, url } at path "image"

**Cause:**  
In the Mongoose schema, `image` was set as a `String`, but sample data provided it as an object.

---

## ✅ Fix

### 🔧 Before (❌ schema mismatch)
```js
image: String
✅ After (correct schema)
js
Copy
Edit
image: {
  filename: String,
  url: String
}
💡 Reminder
Match seed data structure with schema definition.

Use object subfields when storing structured data like images.

📂 Key Files
init/index.js (seeding script)
js
Copy
Edit
const mongoose = require("mongoose");
const initData = require("./data.js");
const Listing = require("../models/listing.js");

const MONGO_URL = "mongodb://127.0.0.1:27017/StayNest";
main().then(() => console.log("Connect to DB"));

async function main() {
  await mongoose.connect(MONGO_URL);
}

const initDB = async () => {
  await Listing.deleteMany({});
  await Listing.insertMany(initData.data);
  console.log("data was initialized");
};
initDB();
data.js (sample data)
js
Copy
Edit
const sampleListings = [
  {
    title: "Cozy Beachfront Cottage",
    image: {
      filename: "listingimage",
      url: "https://images.unsplash.com/photo-1552733407-5d5c46c3bb3b?...",
    },
    price: 1500,
    location: "Malibu",
    country: "United States",
  },
];
module.exports = { data: sampleListings };
🧠 Learning
Define nested objects clearly in schema to avoid Mongoose casting errors.