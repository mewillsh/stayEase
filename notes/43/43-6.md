Here's your clean, concise markdown note for the route /listings/:id, covering the EJS formatting, routing, and form parsing logic:

markdown
Copy
Edit
# 📄 StayNest Project – Route: `/listings/:id` and EJS Detail View

---

## ✅ 1. Middleware to Parse URL-encoded Data

```js
app.use(express.urlencoded({ extended: true }));
Parses incoming form data (from POST or query strings).

Needed when sending data from HTML forms.

🛣️ 2. Route for Showing a Single Listing
js
Copy
Edit
app.get("/listings/:id", async (req, res) => {
    let { id } = req.params;
    const listing = await Listing.findById(id);
    res.render("listings/show", { listing });
});
:id is a dynamic route parameter.

req.params.id gives the value from the URL.

Listing.findById(id) fetches the listing by its MongoDB _id.

Data is passed to the view using { listing }.

🧾 3. EJS Template: show.ejs
ejs
Copy
Edit
<h1>Title <%= listing.title %></h1>
<ul>
  <li><%= listing.description %></li>
  <li>&#8377;<%= listing.price.toLocaleString("en-IN") %></li>
  <li><%= listing.location %></li>
  <li><%= listing.country %></li>
</ul>
🔍 Explanation:
<%= %> → Outputs values (escaped for HTML).

toLocaleString("en-IN") → Formats numbers with Indian-style commas.

Example: 1000000 → 10,00,000

&#8377; → HTML code for the ₹ (Rupee) symbol.

✅ Folder Structure Summary
bash
Copy
Edit
StayNest/
 └── views/
     └── listings/
         └── show.ejs     ← For `/listings/:id`
         └── index.ejs    ← For `/listings`
❌ Common Errors and Fixes
Error/Issue	Reason	Fix
listing is undefined	findById returned null	Ensure correct ID or handle not found case
Cannot read properties of null	EJS tried to access a field of undefined	Use optional chaining or error checks
Number not formatted as 10,00,000	Missing .toLocaleString("en-IN")	Add formatting inside EJS tag

✅ Summary
Dynamic routing with URL params

Data fetching by _id using Mongoose

Clean EJS formatting with currency display

Parsing form data using express.urlencoded()

